<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Az 104 - ThanhLD Site</title><meta name="Description" content="Hi, My name&#39;s Thanh 
 Skype: live:fushion48 
 PhoneNumber: &#43;84918279888"><meta property="og:title" content="Az 104" />
<meta property="og:description" content="Entra ID Licences The feature can only be used with security groups (only), and Microsoft 365 groups that have securityEnabled=TRUE. Can delete all users whether a license is assigned directly or via inheritance from a group membership Groups with active license assignments cannot be deleted Users Azure (RBAC) and Azure AD roles are independent. AD roles do not grant access to resources and Azure roles do not grant access to Azure AD." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ducthanh98.github.io/posts/az-104/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-19T22:57:18+07:00" />
<meta property="article:modified_time" content="2024-02-19T22:57:18+07:00" /><meta property="og:site_name" content="ThanhLD site" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Az 104"/>
<meta name="twitter:description" content="Entra ID Licences The feature can only be used with security groups (only), and Microsoft 365 groups that have securityEnabled=TRUE. Can delete all users whether a license is assigned directly or via inheritance from a group membership Groups with active license assignments cannot be deleted Users Azure (RBAC) and Azure AD roles are independent. AD roles do not grant access to resources and Azure roles do not grant access to Azure AD."/>
<meta name="application-name" content="ThanhLD site">
<meta name="apple-mobile-web-app-title" content="ThanhLD site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://ducthanh98.github.io/posts/az-104/" /><link rel="prev" href="https://ducthanh98.github.io/posts/golang/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Az 104",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/ducthanh98.github.io\/posts\/az-104\/"
        },"genre": "posts","wordcount":  2698 ,
        "url": "https:\/\/ducthanh98.github.io\/posts\/az-104\/","datePublished": "2024-02-19T22:57:18+07:00","dateModified": "2024-02-19T22:57:18+07:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Author"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ThanhLD Site">ThanhLD Site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ThanhLD Site">ThanhLD Site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Az 104</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Author</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-02-19">2024-02-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;2698 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;13 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#licences">Licences</a></li>
    <li><a href="#users">Users</a></li>
    <li><a href="#managed-identity">Managed Identity</a></li>
    <li><a href="#self-service-reset-password">Self service reset password</a></li>
  </ul>

  <ul>
    <li><a href="#roles">Roles</a></li>
    <li><a href="#alert">Alert</a></li>
  </ul>

  <ul>
    <li><a href="#connection-troubleshoot">Connection troubleshoot</a></li>
    <li><a href="#azure-monitor">Azure Monitor</a></li>
    <li><a href="#network-security-group-nsg-flow-logs-are">Network security group (NSG) flow logs are:</a></li>
    <li><a href="#ip-flow">IP flow</a></li>
    <li><a href="#next-hop">Next hop</a></li>
  </ul>

  <ul>
    <li><a href="#routing">Routing</a></li>
    <li><a href="#policies">Policies</a></li>
    <li><a href="#encryption">Encryption</a></li>
    <li><a href="#performance">Performance</a></li>
    <li><a href="#migration">Migration</a></li>
    <li><a href="#azure-blob">Azure Blob</a></li>
    <li><a href="#setup-importexport">Setup import/export</a></li>
    <li><a href="#azure-file">Azure File</a></li>
  </ul>

  <ul>
    <li><a href="#azure-backup">Azure Backup</a></li>
    <li><a href="#azure-recovery-service-vault">Azure Recovery Service Vault</a></li>
  </ul>

  <ul>
    <li><a href="#bastion">Bastion</a></li>
    <li><a href="#state-management">State management</a></li>
    <li><a href="#scale-sets">Scale sets</a></li>
    <li><a href="#encryption-1">Encryption</a></li>
  </ul>

  <ul>
    <li><a href="#network-interface">Network interface</a></li>
    <li><a href="#monitoring">Monitoring</a></li>
    <li><a href="#connect-two-vnet">Connect two vnet</a></li>
    <li><a href="#vpn">VPN</a>
      <ul>
        <li><a href="#point-to-site-vpn">Point to site VPN</a></li>
        <li><a href="#site-to-site-vpn">Site to site VPN</a></li>
        <li><a href="#wan">WAN</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="entra-id">Entra ID</h1>
<h2 id="licences">Licences</h2>
<ul>
<li>The feature can only be used with security groups (only), and Microsoft 365 groups that have securityEnabled=TRUE.</li>
<li>Can delete all users whether a license is assigned directly or via inheritance from a group membership</li>
<li>Groups with active license assignments cannot be deleted</li>
</ul>
<h2 id="users">Users</h2>
<p>Azure (RBAC) and Azure AD roles are independent. AD roles do not grant access to resources and Azure roles do not grant access to Azure AD. However, a Global Administrator in AD can elevate access to all subscriptions and will be User Access Administrator in Azure root scope.</p>
<p>All 3 users are GA (AD) and Admin3 is owner of the subscription (RBAC).
Admin1 has elevated access, so he is also User Access Admin (RBAC).
To assign a user the owner role at the Subscription scope, you require permissions, such as User Access Admin or Owner.</p>
<p>Box 1: Yes
Admin1 has elevated access, so he is User Access Admin. This is valid.</p>
<p>Box 2: Yes
Admi3 is Owner of the Subscription. This is valid.</p>
<p>Box 3: No
Admin2 is just a GA in Azure AD scope. He doesn’t have permission in the Subscription.</p>
<ul>
<li>You must use Windows Server Active Directory to update the identity, contact info, or job info for users whose source of authority is Windows Server Active Directory.</li>
<li>&ldquo;Bulk Create&rdquo; is for new Azure AD Users.</li>
<li>Use &ldquo;Bulk invite users&rdquo; to prepare a comma-separated value (.csv) file with the user information and invitation preferences</li>
<li>Use the New-AzureADMSInvitation cmdlet which is used to invite a new external user to your directory.</li>
</ul>
<h2 id="managed-identity">Managed Identity</h2>
<ul>
<li>System-assigned: some Azure services allow you to enable a managed identity directly on a service instance. When you enable a system-assigned managed identity, an identity is created in Microsoft Entra ID that is tied to the lifecycle of that service instance. So when the resource is deleted, Azure automatically deletes the identity for you. By design, only that Azure resource can use this identity to request tokens from Microsoft Entra ID.
– User-assigned: you may also create a managed identity as a standalone Azure resource. You can create a user-assigned managed identity and assign it to one or more instances of an Azure service. In the case of user-assigned managed identities, the identity is managed separately from the resources that use it.</li>
</ul>
<h2 id="self-service-reset-password">Self service reset password</h2>
<ul>
<li>Only global admin can add security questions for password reset.</li>
</ul>
<h1 id="subscription-and-management-group">Subscription and Management group</h1>
<ul>
<li>A management group can contain many subscription</li>
<li>Core components:
<ul>
<li>Access control:</li>
<li>Policy:</li>
<li>Budget:</li>
</ul>
</li>
<li>For each resource group we can create its own iam, policy,buget</li>
<li>Maximum 50 tags and it isn&rsquo;t inherited</li>
</ul>
<h2 id="roles">Roles</h2>
<ul>
<li>Owner: perform any action, change permissions on it for whatever scope it&rsquo;s set at</li>
<li>Contributor: do all things except change permissions</li>
<li>Reader: read everything</li>
<li>Operator role only lets you read, enable, and disable apps.</li>
<li>Network Contributor = &ldquo;Lets you manage networks, but not access to them.&rdquo;.</li>
<li>Co-administrators have full access to all resources in a subscription, including the ability to create, read, update, and delete resources.</li>
</ul>
<h2 id="alert">Alert</h2>
<ul>
<li>The rate limit thresholds are:
✑ SMS: No more than 1 SMS every 5 minutes.
✑ Voice: No more than 1 Voice call every 5 minutes.
✑ Email: No more than 100 emails in an hour.
✑ Other actions are not rate limited.</li>
</ul>
<h1 id="azure-network-watcher">Azure Network Watcher</h1>
<ul>
<li>provides tools to monitor, diagnose, view metrics, and enable or disable logs for resources in an Azure virtual network. Network Watcher is designed to monitor and repair the network health of IaaS (Infrastructure-as-a-Service) products which includes Virtual Machines, Virtual Networks, Application Gateways, Load balancers, etc.</li>
</ul>
<h2 id="connection-troubleshoot">Connection troubleshoot</h2>
<ul>
<li>Diagnose outbound connections from a VM: The connection troubleshoot capability enables you to test a connection between a VM and another VM, an FQDN, a
URI, or an IPv4 address. The test returns similar information returned when using the connection monitor capability, but tests the connection at a point in time,</li>
</ul>
<h2 id="azure-monitor">Azure Monitor</h2>
<ul>
<li>the tool used to collect and analyze performance metrics and logs in Azure. It provides insights into the performance of Azure resources, applications, and workloads, and helps identify and troubleshoot issues related to availability, performance, and security</li>
</ul>
<h2 id="network-security-group-nsg-flow-logs-are">Network security group (NSG) flow logs are:</h2>
<ul>
<li>a feature of Azure Network Watcher that allows you to log the source and destination IP address, port, protocol, and whether traffic was allowed or denied by an NSG. Flow data is sent to Azure Storage accounts from where you can access it as well as export it to any visualization tool, SIEM, or IDS of your choice.</li>
</ul>
<h2 id="ip-flow">IP flow</h2>
<ul>
<li>verify checks if a packet is allowed or denied to or from a virtual machine. If the packet is denied by a security group, the name of the rule that denied the packet is returned. IP flow verify helps administrators quickly diagnose connectivity issues from or to the Internet and from or to the on-premises environment.</li>
</ul>
<h2 id="next-hop">Next hop</h2>
<ul>
<li>determine if traffic is being directed to the intended destination, or whether the traffic is being sent nowhere</li>
</ul>
<h1 id="azure-storage">Azure Storage</h1>
<h2 id="routing">Routing</h2>
<ul>
<li>You can choose between microsoft routing or internet routing</li>
<li>Configuring routing preference is not supported for Azure Queues or Azure Tables.</li>
</ul>
<h2 id="policies">Policies</h2>
<ul>
<li>Max stored access policies: 5</li>
<li>Max immutable blob storage: 2 one Legal hold policy and one Time-based retention policy</li>
</ul>
<h2 id="encryption">Encryption</h2>
<ul>
<li>After creation, you can modify encryption type.</li>
<li>Azure storage encryption supports RSA and RSA-HSM keys of sizes 2048, 3072 and 4096</li>
<li>You can use encryption scope for container only</li>
</ul>
<h2 id="performance">Performance</h2>
<ul>
<li>
<p>Tiering is allowed only on block blobs and not for append and page blobs.</p>
</li>
<li>
<p>Select Standard performance for general-purpose v2 storage accounts (default). This type of account is recommended by Microsoft for most scenarios. For more information, see Types of storage accounts.</p>
</li>
<li>
<p>Select Premium for scenarios requiring low latency. After selecting Premium, select the type of premium storage account to create. The following types of premium storage accounts are available:</p>
</li>
</ul>
<p>Block blobs
File shares
Page blobs</p>
<h2 id="migration">Migration</h2>
<ul>
<li>
<p>To make a fail over, choose geo-replication(redundancy)</p>
</li>
<li>
<p>To convert to ZRS must the Kind be: Standard general-purpose v2 (StorageV2), Premium block blobs (BlockBlobStorage) or Premium file shares (FileStorage) and the Replication is from LRS possible (…from GRS/RA-GRS convert to LRS first)</p>
</li>
<li>
<p>To request a live migration to ZRS, GZRS, or RA-GZRS, you need to migrate your storage account from LRS to ZRS in the primary region with no application downtime. To migrate from LRS to GZRS or RA-GZRS, first switch to GRS or RA-GRS and then request a live migration. Similarly, you can request a live migration from GRS or RA-GRS to GZRS or RA-GZRS. To migrate from GRS or RA-GRS to ZRS, first switch to LRS, then request a live migration.</p>
</li>
<li>
<p>Live migration is supported only for storage accounts that use LRS or GRS replication. If your account uses RA-GRS then you need to first change your account’s replication type to either LRS or GRS before proceeding. This intermediary step removes the secondary read-only endpoint provided by RA-GRS before migration.</p>
</li>
</ul>
<h2 id="azure-blob">Azure Blob</h2>
<ul>
<li>Both Azure Active Directory (AD) and Shared Access Signature (SAS) token are supported for Blob storage.</li>
<li>Only Shared Access Signature (SAS) token is supported for File storage.</li>
<li>Object Replication supports General Purpose V2 and Premium Blob accounts.</li>
<li>If you define more than one action on the same blob, lifecycle management applies the least expensive action to the blob. For example, action delete is cheaper than action tierToArchive. Action tierToArchive is cheaper than action tierToCool.</li>
</ul>
<h2 id="setup-importexport">Setup import/export</h2>
<pre tabindex="0"><code>Step 1: Prepare the drives (Attach an external disk to Server1 and then run waimportexport.exe)
Step 2: Create an import job (From the Azure portal, create an import job)
Step 3: Ship the drives to the Azure datacenter (Detach the external disks from Server1 and ship the disks to an Azure data center)
Step 4: Update the job with tracking information (From the Azure portal, update the import job)
</code></pre><h2 id="azure-file">Azure File</h2>
<ul>
<li>The SMB (Server Message Broker) protocol does not support SAS. it still asks for username/password.</li>
<li>Step to create Azure file Sync</li>
</ul>
<pre tabindex="0"><code>1. Prepare Windows Server to use with Azure File Sync

- You need to disable Internet Explorer Enhanced Security Configuration in your server. This is required only for initial server registration. You can re-enable it after the server has been registered.

2. Deploy the Storage Sync Service

- Allows you to create sync groups that contain Azure file shares across multiple storage accounts and multiple registered Windows Servers.

3. Deploy the Azure File Sync agent to TDFileServer1

- The Azure File Sync agent is a downloadable package that enables Windows Server to be synced with an Azure file share.

4. Register TDFileServer1 with Storage Sync Service

- This establishes a trust relationship between your server (or cluster) and the Storage Sync Service. A server can only be registered to one Storage Sync Service and can sync with other servers and Azure file shares associated with the same Storage Sync Service.

- 5. Create a sync group and a cloud endpoint

- A sync group defines the sync topology for a set of files. Endpoints within a sync group are kept in sync with each other.

6. Create a server endpoint

- A server endpoint represents a specific location on a registered server, such as a folder on a server volume.
</code></pre><h1 id="backup">Backup</h1>
<ul>
<li>App service works directly with azure storage and a _backup.filter file can be used to exclude specific folders.</li>
</ul>
<h2 id="azure-backup">Azure Backup</h2>
<ul>
<li>a cost-effective, secure, one-click backup solution that’s scalable based on your backup storage needs. The centralized management interface makes it easy to define backup policies and protect a wide range of enterprise workloads, including Azure Virtual Machines, SQL and SAP databases, and Azure file shares.</li>
<li>When you back up data in Azure, you store that data in an Azure resource called a Recovery Services vault. The Recovery Services vault resource is available from the Settings menu of most Azure services. The benefit of having the Recovery Services vault integrated into the Settings menu of most Azure services is the ease of backing up data.</li>
<li>Here are the steps when you backup an Azure virtual machine:</li>
</ul>
<ul>
<li>Create a Recovery Services vault</li>
<li>Define a backup policy</li>
<li>Apply the backup policy to protect multiple virtual machines</li>
</ul>
<h2 id="azure-recovery-service-vault">Azure Recovery Service Vault</h2>
<ul>
<li>Multi user authorization: MUA: resource guard</li>
<li>a storage entity in Azure that houses data</li>
<li>Support:</li>
</ul>
<ul>
<li>Azure FIle</li>
<li>Azure VM</li>
<li>SQL in Azure VM</li>
<li>DPM</li>
<li>Azure Backup server</li>
<li>Azure Backup Agent</li>
</ul>
<h1 id="azure-vm">Azure VM</h1>
<ul>
<li>Perform a reverse DNS lookup for 10.0.0.4 from VM2 =&gt; vm1.internal.cloudapp.net</li>
<li>Azure DNS supports importing and exporting zone files by using the Azure command-line interface (CLI). Zone file import is not currently supported via Azure PowerShell or the Azure portal.</li>
<li>To protect your AWS-based resources, you can connect an AWS account with either Native of Classic
Cloud Connector.Native cloud connector is the recommended way and provides an agentless connection to
your AWS account that can extend with Defender for Cloud&rsquo;s Defender plans to secure the AWS
resources</li>
<li>Hierarchical namespace: The hierarchical namespace is required for Azure Data Lake Storage, as it enables the storage account to support the data lake&rsquo;s file system structure.</li>
</ul>
<h2 id="bastion">Bastion</h2>
<ul>
<li>When you configure Azure Bastion using the Basic SKU, two instances are created.</li>
<li>Each instance can support 20 concurrent RDP connections and 40 concurrent SSH connections for medium workloads. Once the concurrent sessions are exceeded, an additional scale unit (instance) is required.</li>
<li>Steps to establish connection</li>
</ul>
<pre tabindex="0"><code>+ we need to upgrade the SKU of our Azure Bastion instance.
+ we need to enable the native client support from the configuration settings of Bastion1 in the Azure Portal.
+ Run az network bastion rdp --name &#34;&lt;BastionName&gt;&#34; --resource-group &#34;&lt;ResourceGroupName&gt;&#34; --target-resource-id &#34;&lt;VMResourceId&gt;&#34;
</code></pre><h2 id="state-management">State management</h2>
<pre tabindex="0"><code>Step 1: Create and upload a configuration to Azure Automation
Step 2: Compile a configuration into a node configuration
Step 3: Register a VM to be managed by State Configuration
Step 4: Specify configuration mode settings
Step 5: Assign a node configuration to a managed node
Step 6: Check the compliance status of a managed node
</code></pre><h2 id="scale-sets">Scale sets</h2>
<ul>
<li>If you resize the Scale Set all the VMs get resized at once, thus 4 is the correct answer.</li>
<li>Azure Virtual Machine Scale Sets: grouping of platform-managed virtual machines. The two types of orchestration modes are:</li>
</ul>
<ul>
<li>Uniform – uses a virtual machine profile or template to scale up to desired capacity. This orchestration mode is mainly used for large-scale stateless workloads that require identical VM instances. It also provides fault domain high availability (less than 100 VMs).</li>
<li>Flexible – offers high availability with identical or multiple VM types (up to 1000 VMs) by spreading VMs across fault domains in a region or within an Availability Zone.</li>
</ul>
<h2 id="encryption-1">Encryption</h2>
<ul>
<li>prepare Vault1 for Azure Disk Encryption with a key encryption key (KEK):
<ul>
<li>You need to have a key in the Key Vault.</li>
<li>The key vault itself should be configured for Azure Disk Encryption.</li>
</ul>
</li>
</ul>
<h1 id="azure-network">Azure Network</h1>
<h2 id="network-interface">Network interface</h2>
<ul>
<li>Each NIC attached to a VM must exist in the same location and subscription as the VM.</li>
</ul>
<h2 id="monitoring">Monitoring</h2>
<ul>
<li>When you create or update a virtual network in your subscription, Network Watcher will be enabled automatically in your Virtual Network&rsquo;s region. There is no impact to your resources or associated charge for automatically enabling Network Watcher.</li>
<li>Create a VM with a network security group</li>
<li>Enable Network Watcher (done by default with the vnet/subnet creation)</li>
<li>Register the Microsoft.Insights provider. Enable a traffic flow log for an NSG, using Network Watcher&rsquo;s NSG flow log capability</li>
<li>NSG flow log data is written to an Azure Storage account. Complete the following steps to create a storage account for the log data.</li>
</ul>
<h2 id="connect-two-vnet">Connect two vnet</h2>
<ul>
<li>There are two ways to connect two virtual networks, based on your specific scenario and needs, you might want to pick one over the other.</li>
</ul>
<ul>
<li>
<p>VNet Peering provides low latency, high bandwidth connection useful in scenarios such as cross-region data replication and database failover scenarios. Since traffic is completely private and remains on the Microsoft backbone, customers with strict data policies prefer to use VNet Peering as public Internet is not involved. Since there is no gateway in the path, there are no extra hops, ensuring low latency connections.</p>
</li>
<li>
<p>VPN Gateways provide a limited bandwidth connection and is useful in scenarios where encryption is needed, but bandwidth restrictions are tolerable. In these scenarios, customers are also not latency-sensitive.</p>
</li>
</ul>
<h2 id="vpn">VPN</h2>
<h3 id="point-to-site-vpn">Point to site VPN</h3>
<ul>
<li>IKEv2 IPsec: &ldquo;Route-Based&rdquo; coz &ldquo;Policy-based&rdquo; only supports IKEv1.</li>
<li>Support only RouteBased (dynamic)</li>
<li>Take note that after creating the point-to-site connection between TD1 and TDVnet1, there is already a change in network topology when you created the virtual network peering with TDVnet1 and TDVnet2. Whenever there is a change in the topology of your network, you will always need to download and re-install the VPN configuration file.</li>
</ul>
<h3 id="site-to-site-vpn">Site to site VPN</h3>
<ul>
<li>Create a virtual network</li>
<li>Create a gateway subnet:  /27 or larger (/26, /25, etc.) for your gateway subnet.</li>
<li>Create a VPN Gateway</li>
<li>Create a local network gateway</li>
<li>Configure VPN device</li>
<li>Create VPN connection</li>
<li>Verify connection</li>
</ul>
<h3 id="wan">WAN</h3>
<ul>
<li>Create Azure Virtual WAN</li>
<li>Create Virtual Hub</li>
<li>Create VPN sites</li>
<li>Connect VPN sites to virtual hub</li>
</ul>
<h1 id="azure-app-service">Azure app service</h1>
<ul>
<li>Vnet isn&rsquo;t available for Isolated plan apps in an App Service Environment</li>
<li>Virtual network integration is used only to make outbound calls from your app into your virtual network</li>
</ul>
<h1 id="azure-acr">Azure ACR</h1>
<ul>
<li>If activated, you can use the registry name as username and admin user access key as password to docker login to your container registry</li>
</ul>
<h1 id="command">Command</h1>
<ul>
<li>
<p>The Set-AzureStaticVNetIP PowerShell cmdlet is used to set a static internal IP address for an Azure virtual machine. This cmdlet allows you to set the IP address, subnet mask, and default gateway for the virtual machine&rsquo;s network interface.</p>
</li>
<li>
<p>New-AzureRMVMConfig, is used to create a new virtual machine configuration object.</p>
</li>
<li>
<p>Set-AzureSubnet, is used to modify the properties of an existing Azure subnet, not to set static IP addresses for virtual machines.</p>
</li>
<li>
<p>modifying VM properties in the Azure Management Portal, does not provide a way to set static IP addresses for virtual machines.</p>
</li>
<li>
<p>New-MgUser: creating new users in Azure AD</p>
</li>
<li>
<p>New-AzureADMSInvitation: inviting external guest users</p>
</li>
<li>
<p>New-AzResourceGroupDeployment. This cmdlet allows you to use a custom ARM template file to deploy resources to a resource group</p>
</li>
<li>
<p>New-AzVm to create a VM, but it doesn’t use a template</p>
</li>
<li>
<p>New-AzDeployment cmdlet adds a deployment at the current subscription scope. This includes the resources that the deployment requires.</p>
</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-02-19</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://ducthanh98.github.io/posts/az-104/" data-title="Az 104"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://ducthanh98.github.io/posts/az-104/"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://ducthanh98.github.io/posts/az-104/" data-title="Az 104"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://ducthanh98.github.io/posts/az-104/" data-title="Az 104"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://ducthanh98.github.io/posts/az-104/" data-title="Az 104"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/golang/" class="prev" rel="prev" title="Golang"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Golang</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.107.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
